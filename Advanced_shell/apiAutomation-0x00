#!/usr/bin/env bash
set -euo pipefail
URL="https://pokeapi.co/api/v2/pokemon/pikachu"; TMP="$(mktemp)"; CODE=$(curl -sS -H 'User-Agent: alx-shell' -w '%{http_code}' -o "$TMP" "$URL" || echo "000"); if [ "$CODE" = "200" ]; then mv "$TMP" data.json; echo "Saved to data.json"; else { echo "$(date -Is) ERROR $CODE while fetching $URL" >> errors.txt; rm -f "$TMP"; echo "Request failed; see errors.txt" >&2; exit 1; }; fi
